---
title: Reporting
nav_order: 4
---

# Offline Reporting

IBSR generates **offline reports** from traffic snapshots collected on a target host.
There is no live analysis, no dashboard, and no real-time decision-making.

## Status & Scope

IBSR reporting is **early-stage**.

It is currently intended for:
- controlled pilots
- evaluation and safety testing
- validating whether inline enforcement *could* be safe

The reporting pipeline, outputs, and responsibilities may change as the system evolves.
IBSR should not be relied on for protection.

## Overview

The reporting pipeline is intentionally **offline and unattended**.

Two reporting workflows are supported. For pilots, **vendor-generated reporting is the default**.

At no point are humans expected to monitor live output.

## Reporting Responsibility

### Vendor-Generated Reporting (Pilot Default)

In the default pilot setup:

1. The customer runs the IBSR collector on their infrastructure
2. Raw snapshot files (`.jsonl`) are uploaded to a customer-owned S3 bucket
3. Reports are generated by the IBSR team under agreement
4. Final report artefacts are returned to the customer

In this model:
- Customers do **not** run `ibsr-report`
- Customers do **not** tune thresholds
- Customers do **not** interpret results
- The collector runs unattended once configured

### Customer-Generated Reporting (Optional)

Customers may choose to generate reports themselves using `ibsr-report`.

This workflow is optional and intended for advanced users.
It is **not required** for pilot participation.

## Snapshot Collection

The IBSR collector writes traffic snapshots as `.jsonl` files.

Snapshots may be:
- uploaded directly from the collector host, or
- transferred to another system before upload

Example transfer:

```bash
rsync -avz user@collector:/var/lib/ibsr/snapshots/ ./snapshots/
```

## Uploading to S3 (Required for Pilots)

Raw snapshot data (or report artefacts, if agreed) is uploaded using **`ibsr-export`**.

### Basic S3 Upload (Snapshots)

```bash
ibsr-export s3 \
  --input /var/lib/ibsr/snapshots \
  --bucket <customer-bucket-name> \
  --prefix ibsr/<host-id>/snapshots
```

This command:
- uploads snapshot `.jsonl` files
- preserves directory structure
- exits non-zero on failure

### Scheduled Upload (systemd â€” recommended)

Uploads are typically run on a schedule using systemd.

**Service unit** (`/etc/systemd/system/ibsr-upload.service`):

```ini
[Unit]
Description=IBSR snapshot upload
After=network-online.target
Wants=network-online.target

[Service]
Type=oneshot
User=root
ExecStart=/usr/local/bin/ibsr-export s3 \
  --input /var/lib/ibsr/snapshots \
  --bucket <customer-bucket-name> \
  --prefix ibsr/<host-id>/snapshots
```

**Timer unit** (`/etc/systemd/system/ibsr-upload.timer`):

```ini
[Timer]
OnCalendar=hourly
Persistent=true
RandomizedDelaySec=300

[Install]
WantedBy=timers.target
```

Enable:

```bash
systemctl daemon-reload
systemctl enable --now ibsr-upload.timer
```

### cron (fallback)

```cron
0 * * * * /usr/local/bin/ibsr-export s3 --input /var/lib/ibsr/snapshots --bucket <customer-bucket-name> --prefix ibsr/<host-id>/snapshots >> /var/log/ibsr-upload.log 2>&1
```

## Upload Authentication

`ibsr-export` authenticates using the **standard AWS credential chain** available on the host.

In pilot deployments this is typically:
- an instance or workload role (preferred), or
- static access keys provided via environment variables

IBSR does not implement custom authentication, token management, or user access controls.

## Access Model (Pilot Default)

For pilots, data is uploaded to a **customer-owned S3 bucket**.

- The customer creates and owns the bucket
- The IBSR host is granted **write-only** access to a dedicated prefix
- The customer accesses data using existing AWS IAM permissions

IBSR does not require read access to the bucket.

## Unattended Execution

IBSR is designed to run unattended once configured.

A typical pilot deployment:
- the collector runs continuously
- uploads occur on a schedule
- failures are treated as failed jobs, not live incidents

There are no dashboards to watch and no logs to tail.

## What IBSR Does Not Require

- live monitoring
- dashboards
- alerting
- manual inspection during runtime

IBSR produces artefacts.
Those artefacts are the interface.

